<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="generator" content="rustdoc"><meta name="description" content="This module provides some utilities to define the tree hierarchy to trace memory."><meta name="keywords" content="rust, rustlang, rust-lang, trace"><title>tikv_alloc::trace - Rust</title><link rel="stylesheet" type="text/css" href="../../normalize.css"><link rel="stylesheet" type="text/css" href="../../rustdoc.css" id="mainThemeStyle"><link rel="stylesheet" type="text/css" href="../../light.css"  id="themeStyle"><link rel="stylesheet" type="text/css" href="../../dark.css" disabled ><link rel="stylesheet" type="text/css" href="../../ayu.css" disabled ><script id="default-settings"></script><script src="../../storage.js"></script><script src="../../crates.js"></script><noscript><link rel="stylesheet" href="../../noscript.css"></noscript><link rel="icon" type="image/svg+xml" href="../../favicon.svg">
<link rel="alternate icon" type="image/png" href="../../favicon-16x16.png">
<link rel="alternate icon" type="image/png" href="../../favicon-32x32.png"><style type="text/css">#crate-search{background-image:url("../../down-arrow.svg");}</style></head><body class="rustdoc mod"><!--[if lte IE 8]><div class="warning">This old browser is unsupported and will most likely display funky things.</div><![endif]--><nav class="sidebar"><div class="sidebar-menu" role="button">&#9776;</div><a href='../../tikv_alloc/index.html'><div class='logo-container rust-logo'><img src='../../rust-logo.png' alt='logo'></div></a><p class="location">Module trace</p><div class="sidebar-elems"><div class="block items"><ul><li><a href="#structs">Structs</a></li><li><a href="#enums">Enums</a></li><li><a href="#traits">Traits</a></li><li><a href="#types">Type Definitions</a></li></ul></div><p class="location"><a href="../index.html">tikv_alloc</a></p><div id="sidebar-vars" data-name="trace" data-ty="mod" data-relpath="../"></div><script defer src="../sidebar-items.js"></script></div></nav><div class="theme-picker"><button id="theme-picker" aria-label="Pick another theme!" aria-haspopup="menu"><img src="../../brush.svg" width="18" height="18" alt="Pick another theme!"></button><div id="theme-choices" role="menu"></div></div><nav class="sub"><form class="search-form"><div class="search-container"><div><select id="crate-search"><option value="All crates">All crates</option></select><input class="search-input" name="search" disabled autocomplete="off" spellcheck="false" placeholder="Click or press ‘S’ to search, ‘?’ for more options…" type="search"></div><button type="button" class="help-button">?</button>
                <a id="settings-menu" href="../../settings.html"><img src="../../wheel.svg" width="18" height="18" alt="Change settings"></a></div></form></nav><section id="main" class="content"><h1 class="fqn"><span class="in-band">Module <a href="../index.html">tikv_alloc</a>::<wbr><a class="mod" href="">trace</a><button id="copy-path" onclick="copy_path(this)">⎘</button></span><span class="out-of-band"><span id="render-detail"><a id="toggle-all-docs" href="javascript:void(0)" title="collapse all docs">[<span class="inner">&#x2212;</span>]</a></span><a class="srclink" href="../../src/tikv_alloc/trace.rs.html#3-221" title="goto source code">[src]</a></span></h1><div class="docblock"><p>This module provides some utilities to define the tree hierarchy to trace memory.</p>
<p>A memory trace is a tree that records how much memory its children and itself
uses, It doesn’t need to match any function stacktrace, instead it should
have logically meaningful layout.</p>
<p>For example, memory usage should be divided into several components under the
root scope: TiDB EndPoint, Transaction, Raft, gRPC etc. TiDB EndPoint can divide
its children by queries, while Raft can divide memory by store and apply. Name
are defined as number for better performance. In practice, it can be mapped to
enumerates instead.</p>
<p>To define a memory trace tree, we can use the <code>mem_trace</code> macro. The <code>mem_trace</code>
macro constructs every node as a <code>MemoryTraceNode</code> which implements <code>MemoryTrace</code> trait.
We can also define a specified tree node by implementing <code>MemoryTrace</code> trait.</p>
</div><h2 id="structs" class="section-header"><a href="#structs">Structs</a></h2>
<table><tr class="module-item"><td><a class="struct" href="struct.MemoryTraceNode.html" title="tikv_alloc::trace::MemoryTraceNode struct">MemoryTraceNode</a></td><td class="docblock-short"></td></tr><tr class="module-item"><td><a class="struct" href="struct.MemoryTraceSnapshot.html" title="tikv_alloc::trace::MemoryTraceSnapshot struct">MemoryTraceSnapshot</a></td><td class="docblock-short"></td></tr></table><h2 id="enums" class="section-header"><a href="#enums">Enums</a></h2>
<table><tr class="module-item"><td><a class="enum" href="enum.Id.html" title="tikv_alloc::trace::Id enum">Id</a></td><td class="docblock-short"></td></tr><tr class="module-item"><td><a class="enum" href="enum.TraceEvent.html" title="tikv_alloc::trace::TraceEvent enum">TraceEvent</a></td><td class="docblock-short"></td></tr></table><h2 id="traits" class="section-header"><a href="#traits">Traits</a></h2>
<table><tr class="module-item"><td><a class="trait" href="trait.MemoryTrace.html" title="tikv_alloc::trace::MemoryTrace trait">MemoryTrace</a></td><td class="docblock-short"></td></tr></table><h2 id="types" class="section-header"><a href="#types">Type Definitions</a></h2>
<table><tr class="module-item"><td><a class="type" href="type.HashMap.html" title="tikv_alloc::trace::HashMap type">HashMap</a></td><td class="docblock-short"></td></tr></table></section><section id="search" class="content hidden"></section><section class="footer"></section><div id="rustdoc-vars" data-root-path="../../" data-current-crate="tikv_alloc" data-search-js="../../search-index.js"></div>
    <script src="../../main.js"></script></body></html>