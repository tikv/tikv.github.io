<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="generator" content="rustdoc"><meta name="description" content="API documentation for the Rust `prewrite` mod in crate `tikv`."><meta name="keywords" content="rust, rustlang, rust-lang, prewrite"><title>tikv::storage::txn::commands::prewrite - Rust</title><link rel="stylesheet" type="text/css" href="../../../../../normalize.css"><link rel="stylesheet" type="text/css" href="../../../../../rustdoc.css" id="mainThemeStyle"><link rel="stylesheet" type="text/css" href="../../../../../light.css"  id="themeStyle"><link rel="stylesheet" type="text/css" href="../../../../../dark.css" disabled ><link rel="stylesheet" type="text/css" href="../../../../../ayu.css" disabled ><script src="../../../../../storage.js"></script><noscript><link rel="stylesheet" href="../../../../../noscript.css"></noscript><link rel="icon" type="image/svg+xml" href="../../../../../favicon.svg">
<link rel="alternate icon" type="image/png" href="../../../../../favicon-16x16.png">
<link rel="alternate icon" type="image/png" href="../../../../../favicon-32x32.png"><style type="text/css">#crate-search{background-image:url("../../../../../down-arrow.svg");}</style></head><body class="rustdoc mod"><!--[if lte IE 8]><div class="warning">This old browser is unsupported and will most likely display funky things.</div><![endif]--><nav class="sidebar"><div class="sidebar-menu">&#9776;</div><a href='../../../../../tikv/index.html'><div class='logo-container rust-logo'><img src='../../../../../rust-logo.png' alt='logo'></div></a><p class="location">Module prewrite</p><div class="sidebar-elems"><div class="block items"><ul><li><a href="#structs">Structs</a></li><li><a href="#constants">Constants</a></li><li><a href="#traits">Traits</a></li><li><a href="#functions">Functions</a></li></ul></div><p class="location"><a href="../../../../index.html">tikv</a>::<wbr><a href="../../../index.html">storage</a>::<wbr><a href="../../index.html">txn</a>::<wbr><a href="../index.html">commands</a></p><script>window.sidebarCurrent = {name: "prewrite", ty: "mod", relpath: "../"};</script><script defer src="../sidebar-items.js"></script></div></nav><div class="theme-picker"><button id="theme-picker" aria-label="Pick another theme!"><img src="../../../../../brush.svg" width="18" alt="Pick another theme!"></button><div id="theme-choices"></div></div><script src="../../../../../theme.js"></script><nav class="sub"><form class="search-form"><div class="search-container"><div><select id="crate-search"><option value="All crates">All crates</option></select><input class="search-input" name="search" disabled autocomplete="off" spellcheck="false" placeholder="Click or press ‘S’ to search, ‘?’ for more options…" type="search"></div><span class="help-button">?</span>
                <a id="settings-menu" href="../../../../../settings.html"><img src="../../../../../wheel.svg" width="18" alt="Change settings"></a></div></form></nav><section id="main" class="content"><h1 class="fqn"><span class="out-of-band"><span id="render-detail"><a id="toggle-all-docs" href="javascript:void(0)" title="collapse all docs">[<span class="inner">&#x2212;</span>]</a></span><a class="srclink" href="../../../../../src/tikv/storage/txn/commands/prewrite.rs.html#3-1074" title="goto source code">[src]</a></span><span class="in-band">Module <a href="../../../../index.html">tikv</a>::<wbr><a href="../../../index.html">storage</a>::<wbr><a href="../../index.html">txn</a>::<wbr><a href="../index.html">commands</a>::<wbr><a class="mod" href="">prewrite</a></span></h1><div class="docblock"><p>Functionality for handling optimistic and pessimistic prewrites. These are separate commands
(although maybe they shouldn't be since there is only one protobuf), but
handling of the commands is similar. We therefore have a single type (Prewriter) to handle both
kinds of prewrite.</p>
</div><h2 id="structs" class="section-header"><a href="#structs">Structs</a></h2>
<table><tr class="module-item"><td><a class="struct" href="struct.Optimistic.html" title="tikv::storage::txn::commands::prewrite::Optimistic struct">Optimistic</a></td><td class="docblock-short"><p>Optimistic <code>PreWriteKind</code>.</p>
</td></tr><tr class="module-item"><td><a class="struct" href="struct.Pessimistic.html" title="tikv::storage::txn::commands::prewrite::Pessimistic struct">Pessimistic</a></td><td class="docblock-short"><p>Pessimistic <code>PreWriteKind</code>.</p>
</td></tr><tr class="module-item"><td><a class="struct" href="struct.Prewrite.html" title="tikv::storage::txn::commands::prewrite::Prewrite struct">Prewrite</a></td><td class="docblock-short"><p>The prewrite phase of a transaction. The first phase of 2PC.</p>
</td></tr><tr class="module-item"><td><a class="struct" href="struct.PrewritePessimistic.html" title="tikv::storage::txn::commands::prewrite::PrewritePessimistic struct">PrewritePessimistic</a></td><td class="docblock-short"><p>The prewrite phase of a transaction using pessimistic locking. The first phase of 2PC.</p>
</td></tr><tr class="module-item"><td><a class="struct" href="struct.Prewriter.html" title="tikv::storage::txn::commands::prewrite::Prewriter struct">Prewriter</a></td><td class="docblock-short"><p>Handles both kinds of prewrite (K statically indicates either optimistic or pessimistic).</p>
</td></tr></table><h2 id="constants" class="section-header"><a href="#constants">Constants</a></h2>
<table><tr class="module-item"><td><a class="constant" href="constant.FORWARD_MIN_MUTATIONS_NUM.html" title="tikv::storage::txn::commands::prewrite::FORWARD_MIN_MUTATIONS_NUM constant">FORWARD_MIN_MUTATIONS_NUM</a></td><td class="docblock-short"></td></tr></table><h2 id="traits" class="section-header"><a href="#traits">Traits</a></h2>
<table><tr class="module-item"><td><a class="trait" href="trait.MutationLock.html" title="tikv::storage::txn::commands::prewrite::MutationLock trait">MutationLock</a></td><td class="docblock-short"><p>The type of mutation and, optionally, its extra information, differing for the
optimistic and pessimistic transaction.
For optimistic txns, this is <code>Mutation</code>.
For pessimistic txns, this is <code>(Mutation, bool)</code>, where the bool indicates
whether the mutation takes a pessimistic lock or not.</p>
</td></tr><tr class="module-item"><td><a class="trait" href="trait.PrewriteKind.html" title="tikv::storage::txn::commands::prewrite::PrewriteKind trait">PrewriteKind</a></td><td class="docblock-short"><p>Encapsulates things which must be done differently for optimistic or pessimistic transactions.</p>
</td></tr></table><h2 id="functions" class="section-header"><a href="#functions">Functions</a></h2>
<table><tr class="module-item"><td><a class="fn" href="fn.handle_1pc_locks.html" title="tikv::storage::txn::commands::prewrite::handle_1pc_locks fn">handle_1pc_locks</a></td><td class="docblock-short"><p>Commit and delete all 1pc locks in txn.</p>
</td></tr><tr class="module-item"><td><a class="fn" href="fn.one_pc_commit_ts.html" title="tikv::storage::txn::commands::prewrite::one_pc_commit_ts fn">one_pc_commit_ts</a></td><td class="docblock-short"><p>Compute the commit ts of a 1pc transaction.</p>
</td></tr></table></section><section id="search" class="content hidden"></section><section class="footer"></section><script>window.rootPath = "../../../../../";window.currentCrate = "tikv";</script><script src="../../../../../main.js"></script><script defer src="../../../../../search-index.js"></script></body></html>